---
import { MessageCircle } from 'lucide-astro'
import { LINKS } from '../data/site'
import { formatCLP } from '../utils/format'

const {
  title,
  description,
  price,
  image_url,
  category_name = null,
  isFeatured = false
} = Astro.props
---

<div class="bg-white rounded-2xl shadow-lg overflow-hidden group">
  <!-- Imagen -->
  <img
    src={image_url}
    alt={title}
    class="w-full h-56 object-cover group-hover:scale-105 transition duration-500"
  />

  <div class="p-6 text-left">
    <!-- Categoría como pastilla -->
    {
      category_name && (
        <span class="inline-block text-[11px] sm:text-xs font-semibold bg-green-100 text-green-800 px-3 py-1 rounded-full mb-3">
          {category_name}
        </span>
      )
    }

    <!-- Título: puede ocupar varias líneas -->
    <div class="flex flex-col gap-2 min-h-[120px] max-h-[140px] overflow-x-visible">
      <h3
        class="text-lg sm:text-xl font-semibold text-[var(--color-primary)]
           leading-snug break-words whitespace-normal"
      >
        {title}
      </h3>

      <p class="text-xs sm:text-sm text-gray-600 leading-snug break-words whitespace-normal">
        {description ?? ''}
      </p>
    </div>

    <!-- Precio -->
    {
      price && (
        <p class="text-base sm:text-lg font-bold text-[var(--color-primary)] mb-4">
          Desde {formatCLP(price)}
        </p>
      )
    }

    <!-- Botón WhatsApp -->
    <a
      href={LINKS.wa(`Hola! Me interesa el producto: ${title}`)}
      target="_blank"
      class="flex items-center justify-center gap-2 bg-[var(--color-primary)] text-white px-4 py-2 rounded-full font-semibold hover:opacity-90 transition"
    >
      <MessageCircle class="w-4 h-4" />
      Cotizar
    </a>
  </div>
</div>
