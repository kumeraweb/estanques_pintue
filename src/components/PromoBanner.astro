---
import { X, Ticket } from 'lucide-astro'

const wa =
  'https://wa.me/56954161984?text=' +
  encodeURIComponent(
    'Hola! Me interesan los productos y tengo mi cupÃ³n de Navidad ðŸŽ„ #CUPONNAVIDAD'
  )
---

<div
  id="promoSlide"
  class="fixed bottom-4 right-4 sm:right-6 z-[9999]
         bg-white border border-teal-600 text-teal-900 shadow-xl rounded-xl
         px-4 py-3 flex items-center gap-3 w-[85%] sm:w-auto
         translate-x-[120%] opacity-0 transition-all duration-700 ease-out"
>
  <!-- Texto -->
  <div class="text-sm font-semibold">
    ðŸŽ„ Â¡-20% en Estanques!
    <div class="text-xs font-medium text-teal-700">
      CupÃ³n: <strong>#CUPONNAVIDAD</strong>
    </div>
  </div>

  <!-- CTA -->
  <a
    href={wa}
    class="bg-teal-700 text-white text-xs font-bold px-3 py-1 rounded-lg
           hover:bg-teal-800 active:scale-95 transition"
    target="_blank"
    data-conversion="whatsapp"
  >
    Enviar â†’
  </a>

  <!-- BotÃ³n cerrar -->
  <button id="promoClose" class="text-gray-400 hover:text-teal-600">
    <X class="w-4 h-4" />
  </button>
</div>

<script is:inline>
  document.addEventListener('DOMContentLoaded', () => {
    const banner = document.getElementById('promoSlide')
    const btnClose = document.getElementById('promoClose')

    // Mostrar despuÃ©s de 5 segundos
    setTimeout(() => {
      banner.classList.remove('translate-x-[120%]', 'opacity-0')
      banner.classList.add('translate-x-0', 'opacity-100')
    }, 5000)

    // BotÃ³n cerrar
    btnClose.addEventListener('click', () => {
      banner.classList.add('translate-x-[120%]', 'opacity-0')
    })
  })
</script>
